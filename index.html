<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FutureCast - Full Stack Digital Agency</title>
    <script src="./assets/scripts/typed.min.js" async onload="initAnimation()"></script>
    <link rel="stylesheet" href="./assets/styles/style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Source+Sans+Pro:ital@0;1&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=PT+Sans:wght@400;700&display=swap" rel="stylesheet">
</head>

<body>
    <header>
        <navbar>
            <div id="nav-col-1">
                <a class="hire-us-btn" href="https://www.stormbrain.com/hire-us/" role="button">
                    <span class="elementor-button-content-wrapper">
                        <span class="elementor-button-text">HIRE US</span>
                    </span>
                </a>
            </div>
            <div id="nav-col-2">future<span id="logo-highlight">cast</span></div>
            <div id="nav-col-3">
                <div class="toggle-menu-button">
                    <a href="#" class="menu-btn">
                        <span></span>
                        <span></span>
                        <span></span>
                        <span></span>
                    </a>
                </div>
            </div>
        </navbar>
        <div id="promo-container">
            <div id="promo-wrap">
                <div id="promo-left">
                    <div id="p-line-1">
                        Your Future
                    </div>
                    <div id="p-line-2">
                        <div id="typed-strings">
                            <p><em>Development</em></p>
                            <p><em>Marketing</em></p>
                            <p><em>Support</em></p>
                            <p><em>Cast</em></p>
                        </div>
                        <span id="typed"></span>
                    </div>
                    <div id="p-line-3">
                        Team
                    </div>
                </div>
                <div id="promo-right">
                    <img id="lightbulb-on-img" src="./assets/images/light-on-no-hue.png">
                    <img id="lightbulb-off-img" src="./assets/images/light-off.png">
                </div>
            </div>
        </div>
    </header>
    <div>more text here</div>
    <div>more text here</div>
    <div>more text here</div>
    <div>more text here</div>
    <div>more text here</div>
    <div>more text here</div>
    <div>more text here</div>
    <div>more text here</div>
    <div>more text here</div>
    <div>more text here</div>
    <div>more text here</div>
    <div>more text here</div>
    <div>more text here</div>
    <div>more text here</div>
    <div>more text here</div>
    <div>more text here</div>
    <div>more text here</div>
    <div>more text here</div>
    <div>more text here</div>
    <div>more text here</div>
    <div>more text here</div>
    <div>more text here</div>
    <div>more text here</div>
    <div>more text here</div>
    <div>more text here</div>
    <div>more text here</div>
    <div>more text here</div>
    <div>more text here</div>
    <div>more text here</div>
    <div>more text here</div>
    <div>more text here</div>
    <div>more text here</div>
    <div>more text here</div>
    <div>more text here</div>
    <div>more text here</div>
    <div>more text here</div>
    <div>more text here</div>
    <div>more text here</div>
    <div>more text here</div>
    <div>more text here</div>
    <div>more text here</div>
    <div>more text here</div>
    <div>more text here</div>
    <div>more text here</div>
    <div>more text here</div>
    <div>more text here</div>
    <div>more text here</div>
    <div>more text here</div>
    <div>more text here</div>
    <div>more text here</div>
    <div>more text here</div>
    <div>more text here</div>
    <div>more text here</div>
    <div>more text here</div>
    <script>
        const lightOnImg = document.getElementById("lightbulb-on-img");
        const lightOffImg = document.getElementById("lightbulb-off-img");

        function easeInQuint(elapsed, initialValue, amountOfChange, duration) {
            return amountOfChange * (elapsed /= duration) * elapsed * elapsed * elapsed * elapsed + initialValue;
        }

        function easeOutBack(
            elapsed,
            initialValue,
            amountOfChange,
            duration,
            s
        ) {
            if (!s) {
                s = 1.70158;
            }
            return (
                amountOfChange *
                ((elapsed = elapsed / duration - 1) * elapsed * ((s + 1) * elapsed + s) +
                    1) +
                initialValue
            );
        }

        function animate(animateFn, easingFn, durationParam, startValueParam, endValueParam,) {
            const duration = durationParam;
            const startValue = startValueParam;
            const amountOfChange = endValueParam;
            let startTime;

            function tick(onEnd) {
                const elapsed = Date.now() - startTime;
                animateFn(easingFn(elapsed, startValue, amountOfChange, duration));

                if (elapsed < duration) {
                    requestAnimationFrame(() => tick(onEnd));
                } else {
                    if (onEnd) {
                        onEnd();
                    }
                }
            }

            function start(onEnd) {
                startTime = Date.now();
                tick(onEnd);
            }

            return start;
        }

        const lightUpAnimation = animate((newValue) => {
            lightOnImg.style.opacity = newValue;
            lightOffImg.style.opacity = 1 - newValue;
        }, easeOutBack, 500, 0, 1);

        const lightOffAnimation = animate((newValue) => {
            lightOnImg.style.opacity = newValue;
            lightOffImg.style.opacity = 1 - newValue;
        }, easeInQuint, 1500, 1, -1);

        function initAnimation() {
            new Typed('#typed', {
                stringsElement: '#typed-strings',
                loop: true,
                typeSpeed: 50,
                backSpeed: 30,
                smartBackspace: true,
                backDelay: 2000,
                onStringTyped: (arrayPos, self) => {
                    lightUpAnimation(() => {
                        lightOffAnimation();
                    });
                },
            });
        }

        function map(x, in_min, in_max, out_min, out_max) {
            return (x - in_min) * (out_max - out_min) / (in_max - in_min) + out_min;
        }

        window.addEventListener("scroll", function () {
            const distance = window.scrollY;
            console.log(distance)
            if (distance < 200) return;

            if (distance > 485) {
                lightOffImg.style["object-position"] = `0px ${distance - 485}px`
                lightOnImg.style["object-position"] = `0px ${distance - 485}px`
            } else {
                let newOffset = distance - 200;
                // const newOffset = map(distance, 200, 400, 0, 100);
                let transform = `translateY(${newOffset}px)`;
                lightOnImg.style.transform = transform;
                lightOnImg.style.webkitTransform = transform;
                lightOnImg.style.msTransform = transform;
                lightOffImg.style.transform = transform;
                lightOffImg.style.webkitTransform = transform;
                lightOffImg.style.msTransform = transform;

                lightOffImg.style["object-position"] = `0px 0px`
                lightOnImg.style["object-position"] = `0px 0px`
            }

        })
    </script>
</body>

</html>